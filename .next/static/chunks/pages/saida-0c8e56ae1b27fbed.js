(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{8693:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/saida",function(){return s(5976)}])},1727:function(e,a,s){"use strict";s.d(a,{Z:function(){return TopNav}});var t=s(5893),n=s(1664),r=s.n(n),l=s(1163),d=s(169);function TopNav(){let e=(0,l.useRouter)(),{user:a,logout:s}=(0,d.aC)();if(!a)return null;let n=[{href:"/dashboard",label:"Dashboard"},{href:"/articles",label:"Artigos"},{href:"/entrada",label:"Entrada"},{href:"/saida",label:"Sa\xedda"},{href:"/estoque",label:"Estoque"},{href:"/contagem",label:"Contagem"},{href:"/usuarios",label:"Usu\xe1rios"}];return(0,t.jsxs)("header",{className:"header sticky top-0 z-40 shadow-sm",children:[(0,t.jsxs)("div",{className:"max-w-5xl mx-auto flex items-center justify-between p-3",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)("img",{src:"/srj-logo.svg",alt:"SRJ",width:"140"})}),(0,t.jsx)("nav",{className:"hidden md:flex gap-2",children:n.map(a=>{let s=e.pathname===a.href;return(0,t.jsx)(r(),{href:a.href,children:(0,t.jsx)("div",{className:"nav-tab ".concat(s?"nav-tab-active":""),children:a.label})},a.href)})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Ol\xe1, ",null==a?void 0:a.username]}),(0,t.jsx)("button",{onClick:()=>{s()},className:"bg-brand-500 text-white px-3 py-1 rounded no-print",children:"Sair"})]})]}),(0,t.jsx)("div",{className:"md:hidden overflow-auto",children:(0,t.jsx)("div",{className:"flex gap-2 px-3 pb-2",children:n.map(e=>(0,t.jsx)(r(),{href:e.href,children:(0,t.jsx)("div",{className:"nav-tab",children:e.label})},e.href))})})]})}},5976:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Saida}});var t=s(5893),n=s(7294),r=s(1727);function Saida(){let[e,a]=(0,n.useState)(""),[s,l]=(0,n.useState)(null),[d,i]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),find=async()=>{let a=await fetch("/api/rolls?barcode="+encodeURIComponent(e));a.ok?l(await a.json()):(l(null),alert("Rolo n\xe3o encontrado"))},submit=async()=>{if(!s)return alert("Nenhum rolo");let e=await fetch("/api/movements",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roll_id:s.id,quantity:d,note:o,type:"OUT"})});e.ok?(alert("Sa\xedda registrada"),l(null),a(""),i("")):alert("Erro")};return(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)(r.Z,{}),(0,t.jsxs)("main",{className:"max-w-5xl mx-auto p-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-brand-500",children:"Sa\xedda / Corte"}),(0,t.jsxs)("div",{className:"mt-4 p-4 bg-white rounded shadow space-y-2",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:e,onChange:e=>a(e.target.value),placeholder:"C\xf3digo do Rolo (barcode)",className:"flex-1 border p-2 rounded"}),(0,t.jsx)("button",{onClick:find,className:"bg-brand-500 text-white p-2 rounded",children:"Buscar"})]}),s&&(0,t.jsxs)("div",{className:"p-2 border rounded",children:[(0,t.jsxs)("div",{className:"font-medium",children:[s.articleName," - Rolo ",s.id]}),(0,t.jsxs)("div",{children:["Quantidade restante: ",s.remaining_quantity]}),(0,t.jsx)("input",{value:d,onChange:e=>i(e.target.value),placeholder:"Quantidade a cortar",className:"w-full border p-2 rounded mt-2"}),(0,t.jsx)("input",{value:o,onChange:e=>c(e.target.value),placeholder:"Observa\xe7\xe3o",className:"w-full border p-2 rounded mt-2"}),(0,t.jsx)("button",{onClick:submit,className:"bg-brand-500 text-white rounded p-2 mt-2",children:"Registrar Sa\xedda"})]})]})]})]})}}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=8693)}),_N_E=e.O()}]);