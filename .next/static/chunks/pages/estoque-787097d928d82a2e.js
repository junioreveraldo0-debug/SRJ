(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{9105:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/estoque",function(){return a(3093)}])},1727:function(e,t,a){"use strict";a.d(t,{Z:function(){return TopNav}});var s=a(5893),r=a(1664),n=a.n(r),i=a(1163),d=a(169);function TopNav(){let e=(0,i.useRouter)(),{user:t,logout:a}=(0,d.aC)();if(!t)return null;let r=[{href:"/dashboard",label:"Dashboard"},{href:"/articles",label:"Artigos"},{href:"/entrada",label:"Entrada"},{href:"/saida",label:"Sa\xedda"},{href:"/estoque",label:"Estoque"},{href:"/contagem",label:"Contagem"},{href:"/usuarios",label:"Usu\xe1rios"}];return(0,s.jsxs)("header",{className:"header sticky top-0 z-40 shadow-sm",children:[(0,s.jsxs)("div",{className:"max-w-5xl mx-auto flex items-center justify-between p-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)("img",{src:"/srj-logo.svg",alt:"SRJ",width:"140"})}),(0,s.jsx)("nav",{className:"hidden md:flex gap-2",children:r.map(t=>{let a=e.pathname===t.href;return(0,s.jsx)(n(),{href:t.href,children:(0,s.jsx)("div",{className:"nav-tab ".concat(a?"nav-tab-active":""),children:t.label})},t.href)})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Ol\xe1, ",null==t?void 0:t.username]}),(0,s.jsx)("button",{onClick:()=>{a()},className:"bg-brand-500 text-white px-3 py-1 rounded no-print",children:"Sair"})]})]}),(0,s.jsx)("div",{className:"md:hidden overflow-auto",children:(0,s.jsx)("div",{className:"flex gap-2 px-3 pb-2",children:r.map(e=>(0,s.jsx)(n(),{href:e.href,children:(0,s.jsx)("div",{className:"nav-tab",children:e.label})},e.href))})})]})}},3093:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Estoque}});var s=a(5893),r=a(6976),n=a(1727),i=a(7294);let f=e=>fetch(e).then(e=>e.json());function Estoque(){let{data:e}=(0,r.ZP)("/api/reports/inventory",f),[t,a]=(0,i.useState)(""),d=(0,i.useMemo)(()=>e?e.articles.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())):[],[e,t]);return e?(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(n.Z,{}),(0,s.jsxs)("main",{className:"max-w-5xl mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-brand-500",children:"Estoque Atual"}),(0,s.jsxs)("div",{className:"mt-4 flex gap-2 items-center",children:[(0,s.jsx)("input",{value:t,onChange:e=>a(e.target.value),placeholder:"Buscar por artigo",className:"border p-2 rounded flex-1"}),(0,s.jsx)("button",{onClick:()=>{let e=window.open("","_blank");e.document.write("<html><head><title>Estoque Atual - SRJ</title><style>body{font-family:Arial;margin:20px} .header{display:flex;justify-content:space-between;align-items:center} .table th{background:#e6f0ff;padding:8px;text-align:left} .table td{padding:8px;border-bottom:1px solid #eee}</style></head><body>"),e.document.write('<div class="header"><div><img src="/srj-logo.svg" width="140"/></div><div>Emitido em: '+new Date().toLocaleString()+"</div></div>"),e.document.write("<h2>Estoque Atual - Resumo por Artigo</h2>"),e.document.write('<table class="table" style="width:100%"><thead><tr><th>Artigo</th><th>Fornecedor</th><th>Largura (cm)</th><th>Qtd. R.</th><th>Metragem (m)</th></tr></thead><tbody>'),d.forEach(t=>{e.document.write("<tr><td>"+t.name+"</td><td>"+(t.supplier||"")+"</td><td>"+(t.width||"")+"</td><td>"+(t.count||0)+"</td><td>"+(t.total_remaining||0)+"</td></tr>")}),e.document.write("</tbody></table>"),e.document.write("</body></html>"),e.document.close(),e.print(),e.onafterprint=()=>e.close()},className:"bg-brand-500 text-white p-2 rounded",children:"Imprimir Estoque"})]}),(0,s.jsx)("div",{className:"mt-4 space-y-2",children:d.map(e=>(0,s.jsx)("div",{className:"p-4 bg-white rounded shadow",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Fornecedor: ",e.supplier," â€¢ Largura: ",e.width," cm"]})]}),(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("div",{children:["Rolos: ",e.count||0]}),(0,s.jsxs)("div",{children:["Total: ",e.total_remaining||0," m"]})]})]})},e.id))})]})]}):(0,s.jsx)("div",{children:"Carregando..."})}}},function(e){e.O(0,[664,976,774,888,179],function(){return e(e.s=9105)}),_N_E=e.O()}]);