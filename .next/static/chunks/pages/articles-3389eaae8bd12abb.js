(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{9682:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles",function(){return t(3186)}])},1727:function(e,a,t){"use strict";t.d(a,{Z:function(){return TopNav}});var s=t(5893),r=t(1664),l=t.n(r),n=t(1163),i=t(169);function TopNav(){let e=(0,n.useRouter)(),{user:a,logout:t}=(0,i.aC)();if(!a)return null;let r=[{href:"/dashboard",label:"Dashboard"},{href:"/articles",label:"Artigos"},{href:"/entrada",label:"Entrada"},{href:"/saida",label:"Sa\xedda"},{href:"/estoque",label:"Estoque"},{href:"/contagem",label:"Contagem"},{href:"/usuarios",label:"Usu\xe1rios"}];return(0,s.jsxs)("header",{className:"header sticky top-0 z-40 shadow-sm",children:[(0,s.jsxs)("div",{className:"max-w-5xl mx-auto flex items-center justify-between p-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)("img",{src:"/srj-logo.svg",alt:"SRJ",width:"140"})}),(0,s.jsx)("nav",{className:"hidden md:flex gap-2",children:r.map(a=>{let t=e.pathname===a.href;return(0,s.jsx)(l(),{href:a.href,children:(0,s.jsx)("div",{className:"nav-tab ".concat(t?"nav-tab-active":""),children:a.label})},a.href)})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Ol\xe1, ",null==a?void 0:a.username]}),(0,s.jsx)("button",{onClick:()=>{t()},className:"bg-brand-500 text-white px-3 py-1 rounded no-print",children:"Sair"})]})]}),(0,s.jsx)("div",{className:"md:hidden overflow-auto",children:(0,s.jsx)("div",{className:"flex gap-2 px-3 pb-2",children:r.map(e=>(0,s.jsx)(l(),{href:e.href,children:(0,s.jsx)("div",{className:"nav-tab",children:e.label})},e.href))})})]})}},3186:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Articles}});var s=t(5893),r=t(6976),l=t(7294),n=t(1727);let f=e=>fetch(e).then(e=>e.json());function getToken(){try{let e=localStorage.getItem("estoque_srj_user");if(!e)return null;return JSON.parse(e).token}catch(e){return null}}function Articles(){let{data:e,mutate:a}=(0,r.ZP)("/api/articles",f),[t,i]=(0,l.useState)(""),[d,c]=(0,l.useState)(""),[o,u]=(0,l.useState)(""),[h,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{let e=await fetch("/api/users/me",{headers:{Authorization:"Bearer "+getToken()}});if(e.ok){let a=await e.json();m(a.role)}})()},[]);let add=async()=>{await fetch("/api/articles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,supplier:d,width:o})}),i(""),c(""),u(""),a()},remove=async e=>{if(!confirm("Excluir artigo e todos os rolos relacionados?"))return;let t=getToken(),s=await fetch("/api/articles/"+e,{method:"DELETE",headers:{Authorization:"Bearer "+t}});s.ok?a():alert("Erro ao excluir")};return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(n.Z,{}),(0,s.jsxs)("main",{className:"max-w-5xl mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-brand-500",children:"Artigos"}),(0,s.jsxs)("div",{className:"mt-4 p-4 bg-white rounded shadow",children:[(0,s.jsx)("input",{value:t,onChange:e=>i(e.target.value),placeholder:"Nome do artigo",className:"w-full border p-2 rounded mb-2"}),(0,s.jsx)("input",{value:d,onChange:e=>c(e.target.value),placeholder:"Fornecedor",className:"w-full border p-2 rounded mb-2"}),(0,s.jsx)("input",{value:o,onChange:e=>u(e.target.value),placeholder:"Largura (cm)",className:"w-full border p-2 rounded mb-2"}),(0,s.jsx)("button",{onClick:add,className:"bg-brand-500 text-white rounded p-2",children:"Adicionar"})]}),(0,s.jsx)("div",{className:"mt-4 bg-white p-4 rounded shadow",children:null==e?void 0:e.map(e=>(0,s.jsxs)("div",{className:"p-2 border-b flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Fornecedor: ",e.supplier," â€¢ Largura: ",e.width," cm"]})]}),(0,s.jsxs)("div",{className:"text-sm flex items-center gap-2",children:["admin"===h&&(0,s.jsx)("button",{onClick:()=>remove(e.id),className:"text-red-600",children:"Excluir"}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:e.id})]})]},e.id))})]})]})}}},function(e){e.O(0,[664,976,774,888,179],function(){return e(e.s=9682)}),_N_E=e.O()}]);