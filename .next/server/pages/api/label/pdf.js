"use strict";(()=>{var e={};e.id=755,e.ids=[755],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2007:e=>{e.exports=require("pdf-lib")},1721:e=>{e.exports=import("@upstash/redis")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2205:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>l,routeModule:()=>p});var i=a(1802),n=a(7153),s=a(6249),d=a(3486),o=e([d]);d=(o.then?(await o)():o)[0];let l=(0,s.l)(d,"default"),u=(0,s.l)(d,"config"),p=new i.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/label/pdf",pathname:"/api/label/pdf",bundlePath:"",filename:""},userland:d});r()}catch(e){r(e)}})},3486:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>handler});var i=a(3924),n=a(2007),s=e([i]);async function handler(e,t){try{let a=e.query.id;if(!a)return t.status(400).send("Missing id");let r=await (0,i.c)("rolls"),s=r.find(e=>e.id===a);if(!s)return t.status(404).send("Not found");let d=await n.PDFDocument.create(),o=d.addPage([566.92,453.54]);await d.embedFont(n.StandardFonts.HelveticaBold),o.drawText("SRJ",{x:20,y:o.getHeight()-40,size:24,color:(0,n.rgb)(.12,.45,.91)}),o.drawText("Artigo: "+(s.articleName||""),{x:20,y:o.getHeight()-70,size:10}),o.drawText("Fornecedor: "+(s.supplier||""),{x:20,y:o.getHeight()-85,size:10}),o.drawText("Nuance: "+(s.nuance||""),{x:20,y:o.getHeight()-100,size:10}),o.drawText("Metragem: "+(s.remaining_quantity||"")+" m",{x:20,y:o.getHeight()-115,size:10}),o.drawText("Lote: "+(s.lot_number||""),{x:20,y:o.getHeight()-130,size:10}),o.drawText("ID: "+s.id,{x:20,y:o.getHeight()-150,size:9});let l=await d.save();t.setHeader("Content-Type","application/pdf"),t.setHeader("Content-Disposition","attachment; filename=etiqueta-"+a+".pdf"),t.send(Buffer.from(l))}catch(e){console.error(e),t.status(500).send("Erro")}}i=(s.then?(await s)():s)[0],r()}catch(e){r(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[222,924],()=>__webpack_exec__(2205));module.exports=a})();