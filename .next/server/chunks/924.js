"use strict";exports.id=924,exports.ids=[924],exports.modules={3167:(r,e,t)=>{t.a(r,async(r,n)=>{try{t.d(e,{T:()=>o});var a=t(1721),i=r([a]);a=(i.then?(await i)():i)[0];let c=process.env.UPSTASH_REDIS_REST_URL,s=process.env.UPSTASH_REDIS_REST_TOKEN,o=null;o=c&&s?new a.Redis({url:c,token:s}):null,n()}catch(r){n(r)}})},3924:(r,e,t)=>{t.a(r,async(r,n)=>{try{t.d(e,{P:()=>writeJSON,c:()=>readJSON});var a=t(7147),i=t.n(a),c=t(1017),s=t.n(c),o=t(3167),l=r([o]);o=(l.then?(await l)():l)[0];let u=s().join(process.cwd(),"data");function filePath(r){return s().join(u,r+".json")}function readLocal(r){let e=filePath(r);try{let r=i().readFileSync(e,"utf8");if(!r)return[];return JSON.parse(r)}catch(r){return[]}}function writeLocal(r,e){let t=filePath(r);return i().writeFileSync(t,JSON.stringify(e,null,2),"utf8"),!0}async function readJSON(r){if(!o.T)return readLocal(r);try{let e=`srj:${r}`,t=await o.T.get(e);if(!t)return[];return JSON.parse(t)}catch(e){return console.error("Redis read error",e),readLocal(r)}}async function writeJSON(r,e){if(!o.T)return writeLocal(r,e);try{let t=`srj:${r}`;return await o.T.set(t,JSON.stringify(e)),!0}catch(t){return console.error("Redis write error",t),writeLocal(r,e)}}i().existsSync(u)||i().mkdirSync(u,{recursive:!0}),n()}catch(r){n(r)}})}};